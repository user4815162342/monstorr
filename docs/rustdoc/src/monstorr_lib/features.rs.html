<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source of the Rust file `monstorr-lib/src/features.rs`."><meta name="keywords" content="rust, rustlang, rust-lang"><title>features.rs - source</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><script defer src="../../main.js"></script><script defer src="../../source-script.js"></script><script defer src="../../source-files.js"></script>
    <noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc source"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../monstorr_lib/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../../monstorr_lib/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../monstorr_lib/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="example-wrap"><pre class="line-numbers"><span id="1">1</span>
<span id="2">2</span>
<span id="3">3</span>
<span id="4">4</span>
<span id="5">5</span>
<span id="6">6</span>
<span id="7">7</span>
<span id="8">8</span>
<span id="9">9</span>
<span id="10">10</span>
<span id="11">11</span>
<span id="12">12</span>
<span id="13">13</span>
<span id="14">14</span>
<span id="15">15</span>
<span id="16">16</span>
<span id="17">17</span>
<span id="18">18</span>
<span id="19">19</span>
<span id="20">20</span>
<span id="21">21</span>
<span id="22">22</span>
<span id="23">23</span>
<span id="24">24</span>
<span id="25">25</span>
<span id="26">26</span>
<span id="27">27</span>
<span id="28">28</span>
<span id="29">29</span>
<span id="30">30</span>
<span id="31">31</span>
<span id="32">32</span>
<span id="33">33</span>
<span id="34">34</span>
<span id="35">35</span>
<span id="36">36</span>
<span id="37">37</span>
<span id="38">38</span>
<span id="39">39</span>
<span id="40">40</span>
<span id="41">41</span>
<span id="42">42</span>
<span id="43">43</span>
<span id="44">44</span>
<span id="45">45</span>
<span id="46">46</span>
<span id="47">47</span>
<span id="48">48</span>
<span id="49">49</span>
<span id="50">50</span>
<span id="51">51</span>
<span id="52">52</span>
<span id="53">53</span>
<span id="54">54</span>
<span id="55">55</span>
<span id="56">56</span>
<span id="57">57</span>
<span id="58">58</span>
<span id="59">59</span>
<span id="60">60</span>
<span id="61">61</span>
<span id="62">62</span>
<span id="63">63</span>
<span id="64">64</span>
<span id="65">65</span>
<span id="66">66</span>
<span id="67">67</span>
<span id="68">68</span>
<span id="69">69</span>
<span id="70">70</span>
<span id="71">71</span>
<span id="72">72</span>
<span id="73">73</span>
<span id="74">74</span>
<span id="75">75</span>
<span id="76">76</span>
<span id="77">77</span>
<span id="78">78</span>
<span id="79">79</span>
<span id="80">80</span>
<span id="81">81</span>
<span id="82">82</span>
<span id="83">83</span>
<span id="84">84</span>
<span id="85">85</span>
<span id="86">86</span>
<span id="87">87</span>
<span id="88">88</span>
<span id="89">89</span>
<span id="90">90</span>
<span id="91">91</span>
<span id="92">92</span>
<span id="93">93</span>
<span id="94">94</span>
<span id="95">95</span>
<span id="96">96</span>
<span id="97">97</span>
<span id="98">98</span>
<span id="99">99</span>
<span id="100">100</span>
<span id="101">101</span>
<span id="102">102</span>
<span id="103">103</span>
<span id="104">104</span>
<span id="105">105</span>
<span id="106">106</span>
<span id="107">107</span>
<span id="108">108</span>
<span id="109">109</span>
<span id="110">110</span>
<span id="111">111</span>
<span id="112">112</span>
<span id="113">113</span>
<span id="114">114</span>
<span id="115">115</span>
<span id="116">116</span>
<span id="117">117</span>
<span id="118">118</span>
<span id="119">119</span>
<span id="120">120</span>
<span id="121">121</span>
<span id="122">122</span>
<span id="123">123</span>
<span id="124">124</span>
<span id="125">125</span>
<span id="126">126</span>
<span id="127">127</span>
<span id="128">128</span>
<span id="129">129</span>
<span id="130">130</span>
<span id="131">131</span>
<span id="132">132</span>
<span id="133">133</span>
<span id="134">134</span>
<span id="135">135</span>
<span id="136">136</span>
<span id="137">137</span>
<span id="138">138</span>
<span id="139">139</span>
<span id="140">140</span>
<span id="141">141</span>
<span id="142">142</span>
<span id="143">143</span>
<span id="144">144</span>
<span id="145">145</span>
<span id="146">146</span>
<span id="147">147</span>
<span id="148">148</span>
<span id="149">149</span>
<span id="150">150</span>
<span id="151">151</span>
<span id="152">152</span>
<span id="153">153</span>
<span id="154">154</span>
<span id="155">155</span>
<span id="156">156</span>
<span id="157">157</span>
<span id="158">158</span>
<span id="159">159</span>
<span id="160">160</span>
<span id="161">161</span>
<span id="162">162</span>
<span id="163">163</span>
<span id="164">164</span>
<span id="165">165</span>
<span id="166">166</span>
<span id="167">167</span>
<span id="168">168</span>
<span id="169">169</span>
<span id="170">170</span>
<span id="171">171</span>
<span id="172">172</span>
<span id="173">173</span>
<span id="174">174</span>
<span id="175">175</span>
<span id="176">176</span>
<span id="177">177</span>
<span id="178">178</span>
<span id="179">179</span>
<span id="180">180</span>
<span id="181">181</span>
<span id="182">182</span>
<span id="183">183</span>
<span id="184">184</span>
<span id="185">185</span>
<span id="186">186</span>
<span id="187">187</span>
<span id="188">188</span>
<span id="189">189</span>
<span id="190">190</span>
<span id="191">191</span>
<span id="192">192</span>
<span id="193">193</span>
<span id="194">194</span>
<span id="195">195</span>
<span id="196">196</span>
<span id="197">197</span>
<span id="198">198</span>
<span id="199">199</span>
<span id="200">200</span>
<span id="201">201</span>
<span id="202">202</span>
<span id="203">203</span>
<span id="204">204</span>
<span id="205">205</span>
<span id="206">206</span>
<span id="207">207</span>
<span id="208">208</span>
<span id="209">209</span>
<span id="210">210</span>
<span id="211">211</span>
<span id="212">212</span>
<span id="213">213</span>
<span id="214">214</span>
<span id="215">215</span>
<span id="216">216</span>
<span id="217">217</span>
<span id="218">218</span>
<span id="219">219</span>
<span id="220">220</span>
<span id="221">221</span>
<span id="222">222</span>
<span id="223">223</span>
<span id="224">224</span>
<span id="225">225</span>
<span id="226">226</span>
<span id="227">227</span>
<span id="228">228</span>
<span id="229">229</span>
<span id="230">230</span>
<span id="231">231</span>
<span id="232">232</span>
<span id="233">233</span>
<span id="234">234</span>
<span id="235">235</span>
<span id="236">236</span>
<span id="237">237</span>
<span id="238">238</span>
<span id="239">239</span>
<span id="240">240</span>
<span id="241">241</span>
<span id="242">242</span>
<span id="243">243</span>
<span id="244">244</span>
<span id="245">245</span>
<span id="246">246</span>
<span id="247">247</span>
<span id="248">248</span>
<span id="249">249</span>
<span id="250">250</span>
<span id="251">251</span>
<span id="252">252</span>
<span id="253">253</span>
<span id="254">254</span>
<span id="255">255</span>
<span id="256">256</span>
<span id="257">257</span>
<span id="258">258</span>
<span id="259">259</span>
<span id="260">260</span>
<span id="261">261</span>
<span id="262">262</span>
<span id="263">263</span>
<span id="264">264</span>
<span id="265">265</span>
<span id="266">266</span>
<span id="267">267</span>
<span id="268">268</span>
<span id="269">269</span>
<span id="270">270</span>
<span id="271">271</span>
<span id="272">272</span>
<span id="273">273</span>
<span id="274">274</span>
<span id="275">275</span>
<span id="276">276</span>
<span id="277">277</span>
<span id="278">278</span>
<span id="279">279</span>
<span id="280">280</span>
<span id="281">281</span>
<span id="282">282</span>
<span id="283">283</span>
<span id="284">284</span>
<span id="285">285</span>
<span id="286">286</span>
<span id="287">287</span>
<span id="288">288</span>
<span id="289">289</span>
<span id="290">290</span>
<span id="291">291</span>
<span id="292">292</span>
<span id="293">293</span>
<span id="294">294</span>
<span id="295">295</span>
<span id="296">296</span>
<span id="297">297</span>
<span id="298">298</span>
<span id="299">299</span>
<span id="300">300</span>
<span id="301">301</span>
<span id="302">302</span>
<span id="303">303</span>
<span id="304">304</span>
<span id="305">305</span>
<span id="306">306</span>
<span id="307">307</span>
<span id="308">308</span>
<span id="309">309</span>
<span id="310">310</span>
<span id="311">311</span>
<span id="312">312</span>
<span id="313">313</span>
<span id="314">314</span>
<span id="315">315</span>
<span id="316">316</span>
<span id="317">317</span>
<span id="318">318</span>
<span id="319">319</span>
<span id="320">320</span>
<span id="321">321</span>
<span id="322">322</span>
<span id="323">323</span>
<span id="324">324</span>
<span id="325">325</span>
<span id="326">326</span>
<span id="327">327</span>
<span id="328">328</span>
<span id="329">329</span>
<span id="330">330</span>
<span id="331">331</span>
<span id="332">332</span>
<span id="333">333</span>
<span id="334">334</span>
<span id="335">335</span>
<span id="336">336</span>
<span id="337">337</span>
<span id="338">338</span>
<span id="339">339</span>
<span id="340">340</span>
<span id="341">341</span>
<span id="342">342</span>
<span id="343">343</span>
<span id="344">344</span>
<span id="345">345</span>
<span id="346">346</span>
<span id="347">347</span>
<span id="348">348</span>
<span id="349">349</span>
<span id="350">350</span>
<span id="351">351</span>
<span id="352">352</span>
<span id="353">353</span>
<span id="354">354</span>
<span id="355">355</span>
<span id="356">356</span>
<span id="357">357</span>
<span id="358">358</span>
<span id="359">359</span>
<span id="360">360</span>
<span id="361">361</span>
<span id="362">362</span>
<span id="363">363</span>
<span id="364">364</span>
<span id="365">365</span>
<span id="366">366</span>
<span id="367">367</span>
<span id="368">368</span>
<span id="369">369</span>
<span id="370">370</span>
<span id="371">371</span>
<span id="372">372</span>
<span id="373">373</span>
<span id="374">374</span>
<span id="375">375</span>
<span id="376">376</span>
<span id="377">377</span>
<span id="378">378</span>
<span id="379">379</span>
<span id="380">380</span>
<span id="381">381</span>
<span id="382">382</span>
<span id="383">383</span>
<span id="384">384</span>
<span id="385">385</span>
<span id="386">386</span>
<span id="387">387</span>
<span id="388">388</span>
<span id="389">389</span>
<span id="390">390</span>
<span id="391">391</span>
<span id="392">392</span>
<span id="393">393</span>
<span id="394">394</span>
<span id="395">395</span>
<span id="396">396</span>
<span id="397">397</span>
<span id="398">398</span>
<span id="399">399</span>
<span id="400">400</span>
<span id="401">401</span>
<span id="402">402</span>
<span id="403">403</span>
<span id="404">404</span>
<span id="405">405</span>
<span id="406">406</span>
<span id="407">407</span>
<span id="408">408</span>
<span id="409">409</span>
<span id="410">410</span>
<span id="411">411</span>
<span id="412">412</span>
<span id="413">413</span>
<span id="414">414</span>
<span id="415">415</span>
<span id="416">416</span>
<span id="417">417</span>
<span id="418">418</span>
<span id="419">419</span>
<span id="420">420</span>
<span id="421">421</span>
<span id="422">422</span>
<span id="423">423</span>
<span id="424">424</span>
<span id="425">425</span>
<span id="426">426</span>
<span id="427">427</span>
<span id="428">428</span>
<span id="429">429</span>
<span id="430">430</span>
<span id="431">431</span>
<span id="432">432</span>
<span id="433">433</span>
<span id="434">434</span>
<span id="435">435</span>
<span id="436">436</span>
<span id="437">437</span>
<span id="438">438</span>
<span id="439">439</span>
<span id="440">440</span>
<span id="441">441</span>
<span id="442">442</span>
<span id="443">443</span>
<span id="444">444</span>
<span id="445">445</span>
<span id="446">446</span>
<span id="447">447</span>
<span id="448">448</span>
<span id="449">449</span>
<span id="450">450</span>
<span id="451">451</span>
<span id="452">452</span>
<span id="453">453</span>
<span id="454">454</span>
<span id="455">455</span>
<span id="456">456</span>
<span id="457">457</span>
<span id="458">458</span>
<span id="459">459</span>
<span id="460">460</span>
<span id="461">461</span>
<span id="462">462</span>
<span id="463">463</span>
<span id="464">464</span>
<span id="465">465</span>
<span id="466">466</span>
<span id="467">467</span>
<span id="468">468</span>
<span id="469">469</span>
<span id="470">470</span>
<span id="471">471</span>
<span id="472">472</span>
<span id="473">473</span>
<span id="474">474</span>
<span id="475">475</span>
<span id="476">476</span>
<span id="477">477</span>
<span id="478">478</span>
<span id="479">479</span>
<span id="480">480</span>
<span id="481">481</span>
<span id="482">482</span>
<span id="483">483</span>
<span id="484">484</span>
<span id="485">485</span>
<span id="486">486</span>
<span id="487">487</span>
<span id="488">488</span>
<span id="489">489</span>
<span id="490">490</span>
<span id="491">491</span>
<span id="492">492</span>
<span id="493">493</span>
<span id="494">494</span>
<span id="495">495</span>
<span id="496">496</span>
<span id="497">497</span>
<span id="498">498</span>
<span id="499">499</span>
<span id="500">500</span>
<span id="501">501</span>
<span id="502">502</span>
<span id="503">503</span>
<span id="504">504</span>
<span id="505">505</span>
<span id="506">506</span>
<span id="507">507</span>
<span id="508">508</span>
<span id="509">509</span>
<span id="510">510</span>
<span id="511">511</span>
<span id="512">512</span>
<span id="513">513</span>
<span id="514">514</span>
<span id="515">515</span>
<span id="516">516</span>
<span id="517">517</span>
<span id="518">518</span>
<span id="519">519</span>
<span id="520">520</span>
<span id="521">521</span>
<span id="522">522</span>
<span id="523">523</span>
<span id="524">524</span>
<span id="525">525</span>
</pre><pre class="rust"><code><span class="comment">/*
 * Copyright © 2022 Neil M. Sheldon
 * 
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */</span>

<span class="kw">use</span> <span class="ident">serde::Deserialize</span>;
<span class="kw">use</span> <span class="ident">serde::Serialize</span>;

<span class="kw">use</span> <span class="ident"><span class="kw">crate</span>::utils::AndJoin</span>;
<span class="kw">use</span> <span class="ident"><span class="kw">crate</span>::dice_expression::DiceExpression</span>;
<span class="kw">use</span> <span class="ident"><span class="kw">crate</span>::stats::Damage</span>;
<span class="kw">use</span> <span class="ident"><span class="kw">crate</span>::attacks::AttackEffect</span>;
<span class="kw">use</span> <span class="ident"><span class="kw">crate</span>::attacks::CompoundAttackEffect</span>;

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">PartialEq</span>,<span class="ident">Debug</span>,<span class="ident">Clone</span>)]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Serialize</span>,<span class="ident">Deserialize</span>)]</span>
<span class="doccomment">/**

Many of the variants in this value are attempts to mimic common features found in the SRD, as well as actions which the Dungeon Master&#39;s Guide says may have an effect on the challenge rating. Other features make automatic changes to the creature at the end of creation. However, since the SRD does not use consistent phrasing for all features, you may not get the output you expect. If you want to use a feature with one of the specified names, use that, even if you have to override the description to fix it later. That way, you&#39;ll get all of the benefits of the feature.

Features which make changes to the creature are done after the creature is mostly finished. Therefore it is not necessary to place the feature after other required features.

*/</span>
<span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Feature</span> {

    
    <span class="doccomment">/**
    `Aggressive`
    */</span>
    <span class="ident">Aggressive</span>,
    
    <span class="doccomment">/**
    `Ambusher`
    */</span>
    <span class="ident">Ambusher</span>,
    
    <span class="doccomment">/**
    `Amorphous`
    */</span>
    <span class="ident">Amorphous</span>,
    
    <span class="doccomment">/**
    `Amphibious`
    */</span>
    <span class="ident">Amphibious</span>,
    
    <span class="doccomment">/**
    `AngelicWeapons(&lt;dice-expression-string&gt;,[&lt;string&gt;..])`

    The first argument is the additional damage added to weapon attacks. The second is the list of actions this is automatically applied to.

    This feature will automatically change the specified attacks to add the specified damage. It will cause an error if the actions do not exist, or if they are in a configuration it can not deal with.
    */</span>
    <span class="ident">AngelicWeapons</span>(<span class="ident">DiceExpression</span>,<span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span>), <span class="comment">// additional damage on weapon attacks, actions to apply it to</span>
    
    <span class="doccomment">/**
    `AntimagicSusceptibility`
    */</span>
    <span class="ident">AntimagicSusceptibility</span>,
    
    <span class="doccomment">/**
    `BlindSenses`
    */</span>
    <span class="ident">BlindSenses</span>,
    
    <span class="doccomment">/**
    `BloodFrenzy`
    */</span>
    <span class="ident">BloodFrenzy</span>,
    
    <span class="doccomment">/**
    `Brute([&lt;string&gt;...])`

    The argument is the list of melee attacks this feature is applied to.

    This feature automatically makes changes to the specified actions. An error will occur if the actions do not exist, are not melee actions, or are in a configuration it does not know how to deal with.
    */</span>
    <span class="ident">Brute</span>(<span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span>), <span class="comment">// list of melee attacks this applies to.</span>
    
    <span class="doccomment">/**
    `Charge(&lt;integer&gt;,&lt;string&gt;,&lt;dice-expression-string&gt;,&lt;Damage&gt;)`

    The first argument is the distance of the charge, the second is the type of attack, the third and fourth indicate the extra damage the charge can cause.
    */</span>
    <span class="ident">Charge</span>(<span class="ident">u8</span>,<span class="ident">String</span>,<span class="ident">DiceExpression</span>,<span class="ident">Damage</span>), <span class="comment">// distance, attack type, extra damage dice, damage type</span>
    
    <span class="doccomment">/**
    `DamageTransfer`
    */</span>
    <span class="ident">DamageTransfer</span>,
    
    <span class="doccomment">/**
    `DeathBurst(&lt;string&gt;,&lt;AttackEffect&gt;)`
    `DeathBurst(&lt;string&gt;,&lt;AttackEffect&gt;,option(&lt;CompoundAttackEffect&gt;))`

    The first is the description of the explosion, the rest is the effect of the explosion.
    */</span>
    <span class="ident">DeathBurst</span>(<span class="ident">String</span>,<span class="ident">AttackEffect</span>,
        <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">default</span>)]</span>
        <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">skip_serializing_if</span> <span class="op">=</span> <span class="string">&quot;Option::is_none&quot;</span>)]</span>
        <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">CompoundAttackEffect</span><span class="op">&gt;</span>), <span class="comment">// explode description, range,  effect of explosion</span>
    
    <span class="doccomment">/**
    `DevilSight`
    */</span>
    <span class="ident">DevilSight</span>,
    
    <span class="doccomment">/**
    `Echolocation`
    */</span>
    <span class="ident">Echolocation</span>,
    
    <span class="doccomment">/**
    `FalseAppearance(&lt;string&gt;)`

    The argument is a description of the false appearance form.
    */</span>
    <span class="ident">FalseAppearance</span>(<span class="ident">String</span>), <span class="comment">// description</span>
    
    <span class="doccomment">/**
    `FeyAncestry`
    */</span>
    <span class="ident">FeyAncestry</span>,
    
    <span class="doccomment">/**
    `Flyby`
    */</span>
    <span class="ident">Flyby</span>,
    
    <span class="doccomment">/**
    `Grappler`
    */</span>
    <span class="ident">Grappler</span>,
    
    <span class="doccomment">/**
    `HoldBreath(&lt;integer&gt;,&lt;boolean&gt;)`

    The first is the duration, the second is whether this is reversed for aquatic creatures (i.e. the creature must hold its breath out of water)
    */</span>
    <span class="ident">HoldBreath</span>(<span class="ident">u8</span>,<span class="ident">bool</span>), <span class="comment">// duration, reversed (&quot;out of water&quot;)</span>
    
    <span class="doccomment">/**
    `Illumination(&lt;integer&gt;)`

    The integer is the radius of the illumination.
    */</span>
    <span class="ident">Illumination</span>(<span class="ident">u8</span>), <span class="comment">// radius</span>
    
    <span class="doccomment">/**
    `ImmutableForm`
    */</span>
    <span class="ident">ImmutableForm</span>,
    
    <span class="doccomment">/**
    `IncorporealMovement(&lt;dice-expression-string&gt;)`

    The argument specifies the force damage roll the creature takes if it ends its turn inside an object.
    */</span>
    <span class="ident">IncorporealMovement</span>(<span class="ident">DiceExpression</span>), <span class="comment">// damage (force) if it ends its turn inside an object</span>
    
    <span class="doccomment">/**
    `Inscrutable`
    */</span>
    <span class="ident">Inscrutable</span>,
    
    <span class="doccomment">/**
    `Invisibility`
    */</span>
    <span class="ident">Invisibility</span>,
    
    <span class="doccomment">/**
    `KeenSenses(&lt;boolean&gt;,&lt;boolean&gt;,&lt;boolean&gt;)`

    The arguments specify which senses this applies. The first specifies sight, the second hearing, and the third smell.
    */</span>
    <span class="ident">KeenSenses</span>(<span class="ident">bool</span>,<span class="ident">bool</span>,<span class="ident">bool</span>), <span class="comment">// sight, hearing, smell</span>
    
    <span class="doccomment">/**
    `LabyrinthineRecall`
    */</span>
    <span class="ident">LabyrinthineRecall</span>,
    
    <span class="doccomment">/**
    `LegendaryResistance`
    */</span>
    <span class="ident">LegendaryResistance</span>,
    
    <span class="doccomment">/**
    `LightSensitivity`
    */</span>
    <span class="ident">LightSensitivity</span>,
    
    <span class="doccomment">/**
    `MagicResistance`
    */</span>
    <span class="ident">MagicResistance</span>,
    
    <span class="doccomment">/**
    `MagicWeapons`
    */</span>
    <span class="ident">MagicWeapons</span>,
    
    <span class="doccomment">/**
    `MartialAdvantage(&lt;dice-expression-string&gt;)`

    The argument specifies the extra damage dice the advantage gives them.
    */</span>
    <span class="ident">MartialAdvantage</span>(<span class="ident">DiceExpression</span>), <span class="comment">// extra damage dice</span>
    
    <span class="doccomment">/**
    `Mimicry(&lt;string&gt;,&lt;integer&gt;)`

    The first argument describes the mimicked speech, the second is the DC for an insight check.
    */</span>
    <span class="ident">Mimicry</span>(<span class="ident">String</span>,<span class="ident">u8</span>), <span class="comment">// description, Insight DC</span>
    
    <span class="doccomment">/**
    `NimbleEscape`
    */</span>
    <span class="ident">NimbleEscape</span>,
    
    <span class="doccomment">/**
    `PackTactics`
    */</span>
    <span class="ident">PackTactics</span>,
    
    <span class="doccomment">/**
    `Pounce(&lt;integer&gt;,&lt;integer&gt;)`

    The first argument is the distance of the pounce, the second is the Strength save DC.
    */</span>
    <span class="ident">Pounce</span>(<span class="ident">u8</span>,<span class="ident">u8</span>), <span class="comment">// distance, save DC (Strength)</span>
    
    <span class="doccomment">/**
    `Rampage`
    */</span>
    <span class="ident">Rampage</span>,
    
    <span class="doccomment">/**
    `Reactive`
    */</span>
    <span class="ident">Reactive</span>,
    
    <span class="doccomment">/**
    `Reckless`
    */</span>
    <span class="ident">Reckless</span>,
    
    <span class="doccomment">/**
    `Regeneration(&lt;integer&gt;,[&lt;Damage&gt;...])`

    The first argument is the number of hit points regenerated, the second is the list of damage this doesn&#39;t apply to. 
    */</span>
    <span class="ident">Regeneration</span>(<span class="ident">u8</span>,<span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">Damage</span><span class="op">&gt;</span>), <span class="comment">// number of hp, damage this doesn&#39;t apply to (might be based on vulnerabilities, in which case I don&#39;t need that)</span>
    
    <span class="doccomment">/**
    `Rejuvenation(&lt;string&gt;)`

    The argument is the description of the feature, as every one is different.
    */</span>
    <span class="ident">Rejuvenation</span>(<span class="ident">String</span>), <span class="comment">// needs a description, every rejuvenation is different</span>
    
    <span class="doccomment">/**
    `Relentless(&lt;integer&gt;)`

    The argument specifies the damage limit.
    */</span>
    <span class="ident">Relentless</span>(<span class="ident">u8</span>), <span class="comment">// damage limit</span>
    
    <span class="doccomment">/**
    `ShadowStealth`
    */</span>
    <span class="ident">ShadowStealth</span>,
    
    <span class="doccomment">/**
    `Shapechanger(&lt;string&gt;)`

    The argument describes the shapes available.
    */</span>
    <span class="ident">Shapechanger</span>(<span class="ident">String</span>),
    
    <span class="doccomment">/**
    `SiegeMonster`
    */</span>
    <span class="ident">SiegeMonster</span>,
    
    <span class="doccomment">/**
    `SpiderClimb`
    */</span>
    <span class="ident">SpiderClimb</span>,
    
    <span class="doccomment">/**
    `StandingLeap(&lt;integer&gt;)`

    The argument specifies the distance of the leap.
    */</span>
    <span class="ident">StandingLeap</span>(<span class="ident">u8</span>), <span class="comment">// distance</span>
    
    <span class="doccomment">/**
    `Steadfast`
    */</span>
    <span class="ident">Steadfast</span>,
    
    <span class="doccomment">/**
    `Stench(&lt;integer&gt;,&lt;integer&gt;)`

    The first integer specifies the range, the second the Constitution save DC.
    */</span>
    <span class="ident">Stench</span>(<span class="ident">u8</span>,<span class="ident">u8</span>), <span class="comment">// range, save DC (Constitution)</span>
    
    <span class="doccomment">/**
    `SunlightSensitivity`
    */</span>
    <span class="ident">SunlightSensitivity</span>,
    
    <span class="doccomment">/**
    `SureFooted`
    */</span>
    <span class="ident">SureFooted</span>,
    
    <span class="doccomment">/**
    `SurpriseAttack(&lt;dice-expression-string&gt;)`

    The argument specifies the extra damage incurred.
    */</span>
    <span class="ident">SurpriseAttack</span>(<span class="ident">DiceExpression</span>), <span class="comment">// extra damage</span>
    
    <span class="doccomment">/**
    `Swarm`
    */</span>
    <span class="ident">Swarm</span>,
    
    <span class="doccomment">/**
    `Tunneler(&lt;integer&gt;)`

    The argument specifies the width of the tunnel.
    */</span>
    <span class="ident">Tunneler</span>(<span class="ident">u8</span>), <span class="comment">// width of tunnel</span>
    
    <span class="doccomment">/**
    `TurnResistance`
    */</span>
    <span class="ident">TurnResistance</span>,
    
    <span class="doccomment">/**
    `TwoHeads`
    */</span>
    <span class="ident">TwoHeads</span>,
    
    <span class="doccomment">/**
    `UndeadFortitude`
    */</span>
    <span class="ident">UndeadFortitude</span>,
    
    <span class="doccomment">/**
    `WebSense`
    */</span>
    <span class="ident">WebSense</span>,
    
    <span class="doccomment">/**
    `WebWalker`
    */</span>
    <span class="ident">WebWalker</span>,

    <span class="doccomment">/**
    `Feature(&lt;string&gt;,&lt;string&gt;)`

    Adds a custom feature to the creature, with the specified name and description. These will be interpolated.
    */</span>
    <span class="ident">Feature</span>(<span class="ident">String</span>,<span class="ident">String</span>), <span class="comment">// name, description</span>
}

<span class="kw">impl</span> <span class="ident">Feature</span> {


    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">get_name</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; <span class="ident">String</span> {
        <span class="kw">match</span> <span class="self">self</span> {
            <span class="ident">Feature::Aggressive</span> =&gt; <span class="string">&quot;Aggressive&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Ambusher</span> =&gt; <span class="string">&quot;Ambusher&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Amorphous</span> =&gt; <span class="string">&quot;Amorphous&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Amphibious</span> =&gt; <span class="string">&quot;Amphibious&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::AngelicWeapons</span>(..) =&gt; <span class="string">&quot;Angelic Weapons&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::AntimagicSusceptibility</span> =&gt; <span class="string">&quot;Antimagic Susceptibility&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::BlindSenses</span> =&gt; <span class="string">&quot;Blind Senses&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::BloodFrenzy</span> =&gt; <span class="string">&quot;Blood Frenzy&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Brute</span>(..) =&gt; <span class="string">&quot;Brute&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Charge</span>(..) =&gt; <span class="string">&quot;Charge&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::DamageTransfer</span> =&gt; <span class="string">&quot;Damage Transfer&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::DeathBurst</span>(..) =&gt; <span class="string">&quot;Death Burst&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::DevilSight</span> =&gt; <span class="string">&quot;Devil Sight&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Echolocation</span> =&gt; <span class="string">&quot;Echolocation&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::FalseAppearance</span>(..) =&gt; <span class="string">&quot;False Appearance&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::FeyAncestry</span> =&gt; <span class="string">&quot;Fey Ancestry&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Flyby</span> =&gt; <span class="string">&quot;Flyby&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Grappler</span> =&gt; <span class="string">&quot;Grappler&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::HoldBreath</span>(..) =&gt; <span class="string">&quot;Hold Breath&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Illumination</span>(<span class="kw">_</span>) =&gt; <span class="string">&quot;Illumination&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::ImmutableForm</span> =&gt; <span class="string">&quot;Immutable Form&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::IncorporealMovement</span>(<span class="kw">_</span>) =&gt; <span class="string">&quot;Incorporeal Movement&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Inscrutable</span> =&gt; <span class="string">&quot;Inscrutable&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Invisibility</span> =&gt; <span class="string">&quot;Invisibility&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::KeenSenses</span>(..) =&gt; <span class="string">&quot;Keen Senses&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::LabyrinthineRecall</span> =&gt; <span class="string">&quot;Labyrinthine Recall&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::LegendaryResistance</span> =&gt; <span class="string">&quot;Legendary Resistance&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::LightSensitivity</span> =&gt; <span class="string">&quot;Light Sensitivity&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::MagicResistance</span> =&gt; <span class="string">&quot;Magic Resistance&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::MagicWeapons</span> =&gt; <span class="string">&quot;Magic Weapons&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::MartialAdvantage</span>(<span class="kw">_</span>) =&gt; <span class="string">&quot;Martial Advantage&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Mimicry</span>(..) =&gt; <span class="string">&quot;Mimicry&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::NimbleEscape</span> =&gt; <span class="string">&quot;Nimble Escape&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::PackTactics</span> =&gt; <span class="string">&quot;Pack Tactics&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Pounce</span>(..) =&gt; <span class="string">&quot;Pounce&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Rampage</span> =&gt; <span class="string">&quot;Rampage&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Reactive</span> =&gt; <span class="string">&quot;Reactive&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Reckless</span> =&gt; <span class="string">&quot;Reckless&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Regeneration</span>(..) =&gt; <span class="string">&quot;Regeneration&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Rejuvenation</span>(<span class="kw">_</span>) =&gt; <span class="string">&quot;Rejuvenation&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Relentless</span>(<span class="kw">_</span>) =&gt; <span class="string">&quot;Relentless&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::ShadowStealth</span> =&gt; <span class="string">&quot;Shadow Stealth&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Shapechanger</span>(..) =&gt; <span class="string">&quot;Shapechanger&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::SiegeMonster</span> =&gt; <span class="string">&quot;Siege Monster&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::SpiderClimb</span> =&gt; <span class="string">&quot;Spider Climb&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::StandingLeap</span>(<span class="kw">_</span>) =&gt; <span class="string">&quot;Standing Leap&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Steadfast</span> =&gt; <span class="string">&quot;Steadfast&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Stench</span>(..) =&gt; <span class="string">&quot;Stench&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::SunlightSensitivity</span> =&gt; <span class="string">&quot;Sunlight Sensitivity&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::SureFooted</span> =&gt; <span class="string">&quot;Sure Footed&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::SurpriseAttack</span>(<span class="kw">_</span>) =&gt; <span class="string">&quot;Surprise Attack&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Swarm</span> =&gt; <span class="string">&quot;Swarm&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Tunneler</span>(<span class="kw">_</span>) =&gt; <span class="string">&quot;Tunneler&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::TurnResistance</span> =&gt; <span class="string">&quot;Turn Resistance&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::TwoHeads</span> =&gt; <span class="string">&quot;Two Heads&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::UndeadFortitude</span> =&gt; <span class="string">&quot;Undead Fortitude&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::WebSense</span> =&gt; <span class="string">&quot;Web Sense&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::WebWalker</span> =&gt; <span class="string">&quot;Web Walker&quot;</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::Feature</span>(<span class="ident">name</span>,..) =&gt; <span class="ident">name</span>.<span class="ident">clone</span>(),
       
        }
    }

    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">get_description</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; <span class="ident">String</span> {
        <span class="kw">match</span> <span class="self">self</span> {
            <span class="ident">Feature::Aggressive</span> =&gt;<span class="macro">format!</span>(<span class="string">&quot;As a bonus action, ${{subj}} can move up to ${{posspro}} speed toward a hostile creature that ${{subjpro}} can see.&quot;</span>),
            <span class="ident">Feature::Ambusher</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} has advantage on attack rolls against any creature ${{subjpro}} has surprised.&quot;</span>),
            <span class="ident">Feature::Amorphous</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} can move through a space as narrow as 1 inch wide without squeezing.&quot;</span>),
            <span class="ident">Feature::Amphibious</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} can breathe air and water.&quot;</span>),
            <span class="ident">Feature::AngelicWeapons</span>(<span class="ident">dice</span>,..) =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Poss}} weapon attacks are magical. When ${{subj}} hits with any weapon, the weapon deals an extra {} radiant damage (included in the attack).&quot;</span>,<span class="ident">dice</span>), 
            <span class="ident">Feature::AntimagicSusceptibility</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} is incapacitated while in the area of an antimagic field. If targeted by dispel magic, ${{subj}} must succeed on a Constitution saving throw against the caster&#39;s spell save DC or fall unconscious for 1 minute.&quot;</span>),
            <span class="ident">Feature::BlindSenses</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} can&#39;t use ${{posspro}} blindsight while deafened and unable to smell.&quot;</span>),
            <span class="ident">Feature::BloodFrenzy</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} has advantage on melee attack rolls against any creature that doesn&#39;t have all its hit points.&quot;</span>),
            <span class="ident">Feature::Brute</span>(..) =&gt; <span class="macro">format!</span>(<span class="string">&quot;A melee weapon deals one extra die of ${{posspro}} damage when ${{subj}} hits with it (included in the attack).&quot;</span>),
            <span class="ident">Feature::Charge</span>(<span class="ident">distance</span>,<span class="ident">attack</span>,<span class="ident">extra_dice</span>,<span class="ident">damage</span>) =&gt; <span class="macro">format!</span>(<span class="string">&quot;If ${{subj}} moves at least {} ft. straight toward a target and then hits it with a {} attack on the same turn, the target takes an extra {} {} damage.&quot;</span>,<span class="ident">distance</span>,<span class="ident">attack</span>,<span class="ident">extra_dice</span>,<span class="ident">damage</span>),
            <span class="ident">Feature::DamageTransfer</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;While ${{subjpro}} is grappling a creature, ${{subj}} takes only half the damage dealt to ${{objpro}}, and the creature grappled by ${{subj}} takes the other half.&quot;</span>),
            <span class="ident">Feature::DeathBurst</span>(<span class="ident">description</span>,<span class="ident">attack</span>,<span class="ident">compound</span>) =&gt; <span class="macro">format!</span>(<span class="string">&quot;When ${{subj}} dies, ${{subjpro}} explodes in a cloud of {}, 5 ft. in radius. {}&quot;</span>,<span class="ident">description</span>,<span class="ident">attack</span>.<span class="ident">get_description</span>(<span class="string">&quot;0&quot;</span>,<span class="ident">compound</span>)), <span class="comment">// explode description, range,  effect of explosion</span>
            <span class="ident">Feature::DevilSight</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;Magical darkness doesn&#39;t impede ${{poss}} darkvision.&quot;</span>),
            <span class="ident">Feature::Echolocation</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} can&#39;t use ${{posspro}} blindsight while deafened.&quot;</span>),
            <span class="ident">Feature::FalseAppearance</span>(<span class="ident">description</span>) =&gt; <span class="ident">description</span>.<span class="ident">clone</span>(),
            <span class="ident">Feature::FeyAncestry</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} has advantage on saving throws against being charmed, and magic can&#39;t put ${{subj}} to sleep.&quot;</span>),
            <span class="ident">Feature::Flyby</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} doesn&#39;t provoke opportunity attacks when ${{subjpro}} flies out of an enemy&#39;s reach.&quot;</span>),
            <span class="ident">Feature::Grappler</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} has advantage on attack rolls against any creature grappled by ${{objpro}}.&quot;</span>),
            <span class="ident">Feature::HoldBreath</span>(<span class="ident">duration</span>,<span class="ident">reversed</span>) =&gt; <span class="kw">if</span> <span class="kw-2">*</span><span class="ident">reversed</span> {
                <span class="macro">format!</span>(<span class="string">&quot;While out of water, ${{subj}} can hold ${{posspro}} breath for {} minutes.&quot;</span>,<span class="ident">duration</span>)
            } <span class="kw">else</span> {
                <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} can hold ${{posspro}} breath for {} minutes.&quot;</span>,<span class="ident">duration</span>)
            }, <span class="comment">// duration, reversed (&quot;out of water&quot;)</span>
            <span class="ident">Feature::Illumination</span>(<span class="ident">radius</span>) =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} sheds bright light in a {}-foot radius and dim light in an additional {} ft.&quot;</span>,<span class="ident">radius</span>,<span class="ident">radius</span>), <span class="comment">// radius</span>
            <span class="ident">Feature::ImmutableForm</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} is immune to any spell or effect that would alter ${{posspro}} form.&quot;</span>),
            <span class="ident">Feature::IncorporealMovement</span>(<span class="ident">damage</span>) =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} can move through other creatures and objects as if they were difficult terrain. ${{Subjpro}} takes {} force damage if ${{subjpro}} ends ${{posspro}} turn inside an object.&quot;</span>,<span class="ident">damage</span>), <span class="comment">// damage (force) if it ends its turn inside an object</span>
            <span class="ident">Feature::Inscrutable</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} is immune to any effect that would sense ${{posspro}} emotions or read ${{posspro}} thoughts, as well as any divination spell that ${{subjpro}} refuses. Wisdom (Insight) checks made to ascertain ${{poss}} intentions or sincerity have disadvantage.&quot;</span>),
            <span class="ident">Feature::Invisibility</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} magically turns invisible until ${{subjpro}} attacks, or until ${{posspro}} concentration ends (as if concentrating on a spell). Any equipment ${{subj}} wears or carries is invisible with ${{objpro}}.&quot;</span>),
            <span class="ident">Feature::KeenSenses</span>(<span class="ident">sight</span>,<span class="ident">hearing</span>,<span class="ident">smell</span>) =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} has advantage on Wisdom (Perception) checks that rely on {}.&quot;</span>,<span class="kw">match</span> (<span class="ident">hearing</span>,<span class="ident">sight</span>,<span class="ident">smell</span>) {
                (<span class="bool-val">true</span>,<span class="bool-val">true</span>,<span class="bool-val">true</span>) =&gt; <span class="string">&quot;sight, hearing, or smell&quot;</span>,
                (<span class="bool-val">true</span>,<span class="bool-val">true</span>,<span class="bool-val">false</span>) =&gt; <span class="string">&quot;sight or hearing&quot;</span>,
                (<span class="bool-val">true</span>,<span class="bool-val">false</span>,<span class="bool-val">true</span>) =&gt; <span class="string">&quot;sight or smell&quot;</span>,
                (<span class="bool-val">true</span>,<span class="bool-val">false</span>,<span class="bool-val">false</span>) =&gt; <span class="string">&quot;sight&quot;</span>,
                (<span class="bool-val">false</span>,<span class="bool-val">true</span>,<span class="bool-val">true</span>) =&gt; <span class="string">&quot;hearing or smell&quot;</span>,
                (<span class="bool-val">false</span>,<span class="bool-val">true</span>,<span class="bool-val">false</span>) =&gt; <span class="string">&quot;hearing&quot;</span>,
                (<span class="bool-val">false</span>,<span class="bool-val">false</span>,<span class="bool-val">true</span>) =&gt; <span class="string">&quot;smell&quot;</span>,
                (<span class="bool-val">false</span>,<span class="bool-val">false</span>,<span class="bool-val">false</span>) =&gt; <span class="string">&quot;no senses&quot;</span>
            }), <span class="comment">// hearing, sight, smell</span>
            <span class="ident">Feature::LabyrinthineRecall</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} can perfectly recall any path ${{subjpro}} has traveled.&quot;</span>),
            <span class="ident">Feature::LegendaryResistance</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;If ${{subj}} fails a saving throw, ${{subjpro}} can choose to succeed instead.&quot;</span>),
            <span class="ident">Feature::LightSensitivity</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;While in bright light, ${{subj}} has disadvantage on attack rolls and Wisdom (Perception) checks that rely on sight.&quot;</span>),
            <span class="ident">Feature::MagicResistance</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} has advantage on saving throws against spells and other magical effects.&quot;</span>),
            <span class="ident">Feature::MagicWeapons</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Poss}} weapon attacks are magical.&quot;</span>),
            <span class="ident">Feature::MartialAdvantage</span>(<span class="ident">dice</span>) =&gt; <span class="macro">format!</span>(<span class="string">&quot;Once per turn, ${{subj}} can deal an extra {} damage to a creature ${{subjpro}} hits with a weapon attack if that creature is within 5 ft. of an ally of ${{subj}} that isn&#39;t incapacitated.&quot;</span>,<span class="ident">dice</span>), <span class="comment">// extra damage dice</span>
            <span class="ident">Feature::Mimicry</span>(<span class="ident">sounds</span>,<span class="ident">check_dc</span>) =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} can mimic {}. A creature that hears the sounds can tell they are imitations with a successful DC {} Wisdom (Insight) check.&quot;</span>,<span class="ident">sounds</span>,<span class="ident">check_dc</span>), <span class="comment">// description, Insight DC</span>
            <span class="ident">Feature::NimbleEscape</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} can take the Disengage or Hide action as a bonus action on each of ${{posspro}} turns.&quot;</span>),
            <span class="ident">Feature::PackTactics</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} has advantage on an attack roll against a creature if at least one of ${{poss}} allies is within 5 ft. of the creature and the ally isn&#39;t incapacitated.&quot;</span>),
            <span class="ident">Feature::Pounce</span>(<span class="ident">distance</span>,<span class="ident">save_dc</span>) =&gt; <span class="macro">format!</span>(<span class="string">&quot;If ${{subj}} moves at least {} ft. straight toward a creature and then hits it with a claw attack on the same turn, that target must succeed on a DC {} Strength saving throw or be knocked prone. If the target is prone, ${{subj}} can make one bite attack against it as a bonus action.&quot;</span>,<span class="ident">distance</span>,<span class="ident">save_dc</span>), <span class="comment">// distance, save DC (Strength)</span>
            <span class="ident">Feature::Rampage</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;When ${{subj}} reduces a creature to 0 hit points with a melee attack on ${{posspro}} turn, ${{subj}} can take a bonus action to move up to half ${{posspro}} speed and make a bite attack.&quot;</span>),
            <span class="ident">Feature::Reactive</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} can take one reaction on every turn in combat.&quot;</span>),
            <span class="ident">Feature::Reckless</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;At the start of ${{posspro}} turn, ${{subj}} can gain advantage on all melee weapon attack rolls during that turn, but attack rolls against ${{objpro}} have advantage until the start of ${{posspro}} next turn.&quot;</span>),
            <span class="ident">Feature::Regeneration</span>(<span class="ident">regain_hp</span>,<span class="ident">vulnerabilities</span>) =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} regains {} hit points at the start of ${{posspro}} turn if ${{subjpro}} has at least 1 hit point. If ${{subj}} takes {} damage, this trait doesn’t function at the start of ${{poss}} next turn. ${{Subj}} dies only if ${{subjpro}} starts ${{posspro}} turn with 0 hit points and doesn&#39;t regenerate.&quot;</span>,<span class="ident">regain_hp</span>,<span class="ident">vulnerabilities</span>.<span class="ident">or_join</span>()), <span class="comment">// number of hp, damage this doesn&#39;t apply to (might be based on vulnerabilities, in which case I don&#39;t need that)</span>
            <span class="comment">// &quot;The vampire regains 20 hit points at the start of its turn if it has at least 1 hit point and isn&#39;t in sunlight or running water. If the vampire takes radiant damage or damage from holy water, this trait doesn&#39;t function at the start of the vampire&#39;s next turn.&quot;</span>
            <span class="comment">// &quot;The oni regains 10 hit points at the start of its turn if it has at least 1 hit point.&quot;</span>
            <span class="comment">// &quot;The troll regains 10 hit points at the start of its turn. If the troll takes acid or fire damage, this trait doesn&#39;t function at the start of the troll&#39;s next turn. The troll dies only if it starts its turn with 0 hit points and doesn&#39;t regenerate.&quot;</span>
            <span class="ident">Feature::Rejuvenation</span>(<span class="ident">description</span>) =&gt; <span class="ident">description</span>.<span class="ident">to_owned</span>(), <span class="comment">// needs a description, every rejuvenation is different</span>
            <span class="ident">Feature::Relentless</span>(<span class="ident">limit</span>) =&gt; <span class="macro">format!</span>(<span class="string">&quot;If ${{subj}} takes {} damage or less that would reduce ${{objpro}} to 0 hit points, ${{subjpro}} is reduced to 1 hit point instead.&quot;</span>,<span class="ident">limit</span>), <span class="comment">// damage limit</span>
            <span class="ident">Feature::ShadowStealth</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;While in dim light or darkness, ${{subj}} can take the Hide action as a bonus action.&quot;</span>),
            <span class="ident">Feature::Shapechanger</span>(<span class="ident">description</span>) =&gt; <span class="ident">description</span>.<span class="ident">to_owned</span>(),
            <span class="ident">Feature::SiegeMonster</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} deals double damage to objects and structures.&quot;</span>),
            <span class="ident">Feature::SpiderClimb</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} can climb difficult surfaces, including upside down on ceilings, without needing to make an ability check.&quot;</span>),
            <span class="ident">Feature::StandingLeap</span>(<span class="ident">long</span>) =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Poss}} long jump is up to {} ft. and ${{posspro}} high jump is up to {} ft., with or without a running start.&quot;</span>,<span class="ident">long</span>,<span class="ident">long</span> <span class="op">/</span> <span class="number">2</span>), <span class="comment">// distance</span>
            <span class="ident">Feature::Steadfast</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} can&#39;t be frightened while ${{subjpro}} can see an allied creature within 30 feet of ${{objpro}}.&quot;</span>),
            <span class="ident">Feature::Stench</span>(<span class="ident">range</span>,<span class="ident">save_dc</span>) =&gt; <span class="macro">format!</span>(<span class="string">&quot;Any creature that starts its turn within {} ft. of ${{subj}} must succeed on a DC {} Constitution saving throw or be poisoned until the start of its next turn. On a successful saving throw, the creature is immune to ${{poss}} stench for 24 hours.&quot;</span>,<span class="ident">range</span>,<span class="ident">save_dc</span>), <span class="comment">// range, save DC (Constitution)</span>
            <span class="ident">Feature::SunlightSensitivity</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;While in sunlight, ${{subj}} has disadvantage on attack rolls, as well as on Wisdom (Perception) checks that rely on sight.&quot;</span>),
            <span class="ident">Feature::SureFooted</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} has advantage on Strength and Dexterity saving throws made against effects that would knock ${{objpro}} prone.&quot;</span>),
            <span class="ident">Feature::SurpriseAttack</span>(<span class="ident">damage</span>) =&gt; <span class="macro">format!</span>(<span class="string">&quot;If ${{subj}} surprises a creature and hits it with an attack during the first round of combat, the target takes an extra {} damage from the attack.&quot;</span>,<span class="ident">damage</span>), <span class="comment">// extra damage</span>
            <span class="ident">Feature::Swarm</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;The swarm can occupy another creature&#39;s space and vice versa, and the swarm can move through any opening large enough for a Tiny individual. The swarm can&#39;t regain hit points or gain temporary hit points.&quot;</span>),
            <span class="ident">Feature::Tunneler</span>(<span class="ident">diameter</span>) =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} can burrow through solid rock at half ${{posspro}} burrow speed and leaves a {}-foot-diameter tunnel in ${{posspro}} wake.&quot;</span>,<span class="ident">diameter</span>), <span class="comment">// width of tunnel</span>
            <span class="ident">Feature::TurnResistance</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} has advantage on saving throws against any effect that turns undead.&quot;</span>),
            <span class="ident">Feature::TwoHeads</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} has advantage on Wisdom (Perception) checks and on saving throws against being blinded, charmed, deafened, frightened, stunned, and knocked unconscious.&quot;</span>),
            <span class="ident">Feature::UndeadFortitude</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;If damage reduces ${{subj}} to 0 hit points, ${{subjpro}} must make a Constitution saving throw with a DC of 5+the damage taken, unless the damage is radiant or from a critical hit. On a success, ${{subj}} drops to 1 hit point instead.&quot;</span>),
            <span class="ident">Feature::WebSense</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;While in contact with a web, ${{subj}} knows the exact location of any other creature in contact with the same web.&quot;</span>),
            <span class="ident">Feature::WebWalker</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;${{Subj}} ignores movement restrictions caused by webbing.&quot;</span>),
            <span class="ident">Feature::Feature</span>(<span class="kw">_</span>,<span class="ident">description</span>) =&gt; <span class="ident">description</span>.<span class="ident">clone</span>(), <span class="comment">// name, description</span>
        }
        
    }

}
</code></pre></div>
</section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="monstorr_lib" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.61.0 (fe5b13d68 2022-05-18)" ></div>
</body></html>